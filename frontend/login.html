<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Login ‚Äì PlagX</title>

  <link rel="stylesheet" href="login.css" />

  <!-- FIREBASE INIT -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
    import { getAuth } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-auth.js";

      const firebaseConfig = {
      apiKey: "AIzaSyAbvVgUW6H3sJBY3Sng7JSCzyBFN1PxrnQ",
      authDomain: "login-98c26.firebaseapp.com",
      projectId: "login-98c26",
      storageBucket: "login-98c26.firebasestorage.app",
      messagingSenderId: "199892612420",
      appId: "1:199892612420:web:db0aeb5bd145f335955311",
      measurementId: "G-NCHVRBDE1D"
    };

    const app = initializeApp(firebaseConfig);
    window.auth = getAuth(app);
  </script>
</head>

<body>
<div class="login-brand">
  <span>PlagX</span>
</div>
<button class="theme-toggle" onclick="toggleTheme()">üåô</button>

<div class="login-wrapper">

  <!-- ================= LEFT PANEL ================= -->
  <div class="info-panel">
    <h1>
      Make your writing
      truly <span>human</span>
    </h1>

    <ul>
      <li>
        <i>ü§ñ</i>
        <div>
          <strong>AI Detection</strong>
          <span>Understand how AI-like your content appears</span>
        </div>
      </li>

      <li>
        <i>üìÑ</i>
        <div>
          <strong>Plagiarism Reports</strong>
          <span>Ensure originality before submission</span>
        </div>
      </li>

      <li>
        <i>‚úçÔ∏è</i>
        <div>
          <strong>Essay Review</strong>
          <span>Built for students & professionals</span>
        </div>
      </li>

      <li>
        <i>üîí</i>
        <div>
          <strong>Private & Secure</strong>
          <span>Your documents stay confidential</span>
        </div>
      </li>
    </ul>
  </div>

  <!-- ================= RIGHT PANEL ================= -->
  <div class="form-panel">

    <div class="card-3d state-login" id="card">

      <!-- ========== LOGIN ========= -->
      <div class="card-face login-face">
        

        <h2>Welcome back</h2>
        <p class="desc">Log in to access your dashboard</p>

        <form id="loginForm">
          <label>Email</label>
          <input id="email" type="email" placeholder="you@example.com" required />

          <label>Password</label>
          <div class="password-wrap">
            <input id="password" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required />
            <span onclick="togglePassword()">üëÅ</span>
          </div>

          <div class="remember-row">
            <label class="remember">
              <input type="checkbox" checked />
              <span>Remember me</span>
            </label>

            <!-- ‚ùå NO FLIP -->
            <a href="/forgot.html" class="link-btn">Forgot password?</a>
          </div>

          <button class="login-btn" type="submit">Log In</button>
        </form>

        <p class="register">
          New to PlagX?
          <button type="button" class="link-btn" onclick="showRegister()">Create account</button>
        </p>
      </div>

      <!-- ========== REGISTER (FLIP) ========= -->
      <div class="card-face register-face">
        

        <h2>Create account</h2>
        <p class="desc">Get started with PlagX in seconds</p>

        <form id="registerForm">
          <label>Email</label>
          <input id="regEmail" type="email" placeholder="you@example.com" required />

          <label>Password</label>
          <input id="regPassword" type="password" placeholder="Minimum 6 characters" required />

          <button class="login-btn" type="submit">Create Account</button>
        </form>

        <button class="link-btn back" onclick="showLogin()">‚Üê Back to login</button>
      </div>

    </div>
  </div>
</div>

<!-- ================= AUTH LOGIC ================= -->
<script type="module">
  import {
    signInWithEmailAndPassword,
    createUserWithEmailAndPassword
  } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-auth.js";

  const card = document.getElementById("card");

  // FLIP CONTROL
  window.showLogin = () => card.className = "card-3d state-login";
  window.showRegister = () => card.className = "card-3d state-register";

  // PASSWORD TOGGLE
  window.togglePassword = () => {
    const p = document.getElementById("password");
    p.type = p.type === "password" ? "text" : "password";
  };

  // DARK MODE
  window.toggleTheme = () => {
    document.body.classList.toggle("dark");
  };

  // LOGIN
  loginForm.addEventListener("submit", async (e) => {
    e.preventDefault();
    try {
      await signInWithEmailAndPassword(auth, email.value, password.value);
      window.location.href = "/dashboard.html";
    } catch (err) {
      if (err.code === "auth/wrong-password") alert("‚ùå Wrong password");
      else if (err.code === "auth/user-not-found") alert("‚ùå Account not found");
      else alert(err.message);
    }
  });

  // REGISTER
  registerForm.addEventListener("submit", async (e) => {
    e.preventDefault();
    try {
      await createUserWithEmailAndPassword(auth, regEmail.value, regPassword.value);
      alert("‚úÖ Account created successfully");
      window.location.href = "/dashboard.html";
    } catch (err) {
      if (err.code === "auth/email-already-in-use") alert("‚ùå Email already exists");
      else if (err.code === "auth/weak-password") alert("‚ùå Password too weak");
      else alert(err.message);
    }
  });
</script>

</body>
</html>
